#!/bin/bash

echo "ğŸ” Verifying Clay Community Site Setup..."
echo

# Check if required files exist
echo "ğŸ“ Checking project structure..."
required_files=(
  "Gemfile"
  "docker-compose.yml"
  "Dockerfile.dev"
  ".env.example"
  "config/database.yml"
  "config/initializers/sidekiq.rb"
  "config/initializers/cors.rb"
)

for file in "${required_files[@]}"; do
  if [ -f "$file" ]; then
    echo "âœ… $file exists"
  else
    echo "âŒ $file missing"
  fi
done

echo
echo "ğŸ³ Checking Docker setup..."
if command -v docker &> /dev/null; then
  echo "âœ… Docker is installed"
else
  echo "âŒ Docker is not installed"
fi

if docker compose version &> /dev/null; then
  echo "âœ… Docker Compose is available"
else
  echo "âŒ Docker Compose is not available"
fi

echo
echo "ğŸ’ Checking Ruby gems..."
if bundle check &> /dev/null; then
  echo "âœ… All gems are installed"
else
  echo "âŒ Some gems are missing - run 'bundle install'"
fi

echo
echo "ğŸ¯ Setup verification complete!"
echo
echo "To start the development environment:"
echo "  docker compose up"
echo
echo "To setup the database:"
echo "  docker compose exec web rails db:create db:migrate"